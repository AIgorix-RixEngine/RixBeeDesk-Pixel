___TERMS_OF_SERVICE___

By creating or modifying this file you agree to Google Tag Manager's Community
Template Gallery Developer Terms of Service available at
https://developers.google.com/tag-manager/gallery-tos (or such other URL as
Google may provide), as modified from time to time.


___INFO___

{
  "type": "TAG",
  "id": "cvt_temp_public_id",
  "version": 1,
  "securityGroups": [],
  "displayName": "RixBeeDesk Pixel",
  "brand": {
    "id": "brand_dummy",
    "displayName": "",
    "thumbnail": "data:image/png;base64,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\u003d"
  },
  "description": "Install RixBeeDesk Pixel to make your website better served",
  "containerContexts": [
    "WEB"
  ]
}


___TEMPLATE_PARAMETERS___

[
  {
    "type": "TEXT",
    "name": "accountId",
    "displayName": "Account ID",
    "simpleValueType": true,
    "valueValidators": [
      {
        "type": "NON_EMPTY"
      }
    ]
  },
  {
    "type": "SELECT",
    "name": "conversionType",
    "displayName": "Conversion Type",
    "macrosInSelect": false,
    "selectItems": [
      {
        "value": "complete_register",
        "displayValue": "Complete Register"
      },
      {
        "value": "search",
        "displayValue": "Search"
      },
      {
        "value": "view_content",
        "displayValue": "View Content"
      },
      {
        "value": "bookmark",
        "displayValue": "Bookmark"
      },
      {
        "value": "add_to_cart",
        "displayValue": "Add To Cart"
      },
      {
        "value": "checkout",
        "displayValue": "Check Out"
      },
      {
        "value": "complete_checkout",
        "displayValue": "Complete Checkout"
      },
      {
        "value": "pageview",
        "displayValue": "Pageview"
      }
    ],
    "simpleValueType": true,
    "valueValidators": [
      {
        "type": "NON_EMPTY"
      }
    ]
  },
  {
    "type": "SELECT",
    "name": "Currenncy",
    "displayName": "Currency",
    "macrosInSelect": true,
    "selectItems": [
      {
        "value": "USD",
        "displayValue": "USD"
      },
      {
        "value": "NTD",
        "displayValue": "NTD"
      }
    ],
    "simpleValueType": true
  },
  {
    "type": "TEXT",
    "name": "Value",
    "displayName": "Conversion Value",
    "simpleValueType": true,
    "help": "The total value of the order (conversion) in the given currency.  Example: 1.6"
  }
]


___SANDBOXED_JS_FOR_WEB_TEMPLATE___

// 在此输入您的模板代码。
const log = require('logToConsole');
const injectScript = require('injectScript');
const copyFromWindow = require('copyFromWindow');
const getType = require('getType');
const encodeUri = require('encodeUri');

const convensionType = data.convensionType;
const accountId = data.accountId;
const url = 'https://crs.rixbeedesk.com/wrapper/' + encodeUri(accountId) + '.js';
injectScript(url, data.gtmOnSuccess, data.gtmOnFailure, url);


const clicker = copyFromWindow('eleForClicker');
if (clicker && convensionType) {
  clicker.track(convensionType);
}


___WEB_PERMISSIONS___

[
  {
    "instance": {
      "key": {
        "publicId": "logging",
        "versionId": "1"
      },
      "param": [
        {
          "key": "environments",
          "value": {
            "type": 1,
            "string": "debug"
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "inject_script",
        "versionId": "1"
      },
      "param": [
        {
          "key": "urls",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 1,
                "string": "https://crs.rixbeedesk.com/wrapper/*.js"
              }
            ]
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "access_globals",
        "versionId": "1"
      },
      "param": [
        {
          "key": "keys",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "key"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  },
                  {
                    "type": 1,
                    "string": "execute"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "eleForClicker"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": false
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              }
            ]
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  }
]


___TESTS___

scenarios: []


___NOTES___

Created on 2024/3/28 15:30:09


